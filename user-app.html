<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DSA Credit Engine - Mobile Ready</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* --- CORE STYLES --- */
        body { margin: 0; font-family: 'Roboto', sans-serif; background-color: #f0f2f5; display: flex; height: 100vh; overflow: hidden; }
        
        /* SIDEBAR */
        .sidebar { width: 250px; background-color: #1a237e; color: white; display: flex; flex-direction: column; padding: 20px; box-shadow: 4px 0 10px rgba(0,0,0,0.1); z-index: 100; transition: 0.3s; flex-shrink: 0; }
        .logo { font-size: 20px; font-weight: bold; margin-bottom: 40px; display: flex; align-items: center; gap: 10px; }
        .nav-item { padding: 12px; margin-bottom: 8px; cursor: pointer; border-radius: 6px; transition: 0.2s; font-size: 14px; }
        .nav-item:hover { background-color: #3949ab; }
        .nav-item.active { background-color: #3949ab; border-left: 4px solid #ffeb3b; }
        .logout { margin-top: auto; background-color: #d32f2f; padding: 12px; text-align: center; border-radius: 6px; cursor: pointer; font-weight: bold; }

        /* MAIN CONTENT */
        .main-wrapper { flex: 1; display: flex; flex-direction: column; overflow: hidden; position: relative; }
        .header-bar { background: white; padding: 15px 20px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center; }
        .page-title { font-size: 20px; font-weight: bold; color: #333; }
        .mobile-toggle { display: none; font-size: 24px; background: none; border: none; cursor: pointer; color: #1a237e; margin-right: 15px; }

        .content-area { flex: 1; padding: 20px; overflow-y: auto; }

        /* VIEWS (Tab Switching) */
        .view-section { display: none; }
        .view-section.active-view { display: block; }

        /* FORM STYLES */
        .accordion { background: white; border-radius: 8px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); border: 1px solid #e0e0e0; }
        .accordion-header { padding: 15px 20px; font-weight: 600; color: #1a237e; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: #fff; }
        .accordion-body { padding: 20px; display: none; border-top: 1px solid #eee; }
        .accordion-body.open { display: block; }
        
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; }
        .form-group { margin-bottom: 10px; }
        label { display: block; margin-bottom: 5px; font-size: 12px; font-weight: 500; color: #555; }
        input, select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 14px; box-sizing: border-box; }
        
        .submit-btn { width: 100%; padding: 15px; background-color: #2e7d32; color: white; font-size: 16px; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; margin-top: 20px; }
        .report-btn { width: 100%; padding: 15px; background-color: #0288d1; color: white; font-size: 16px; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; margin-top: 10px; display: none; }

        /* DASHBOARD STYLES */
        .dash-card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .dash-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .dash-table th, .dash-table td { border: 1px solid #eee; padding: 10px; text-align: left; font-size: 13px; }
        .dash-table th { background: #f9f9f9; }

        /* PDF MODAL */
        #pdfModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 2000; overflow-y: auto; }
        .pdf-paper { background: white; width: 90%; max-width: 800px; margin: 30px auto; padding: 30px; }
        
        /* POINT 5: MOBILE RESPONSIVENESS */
        @media (max-width: 768px) {
            body { flex-direction: column; }
            .sidebar { position: fixed; left: -250px; height: 100%; width: 250px; }
            .sidebar.active-mobile { left: 0; }
            .mobile-toggle { display: block; }
            .main-wrapper { width: 100%; }
            .form-grid { grid-template-columns: 1fr; }
            .dash-table { display: block; overflow-x: auto; white-space: nowrap; }
        }

        @media print {
            body > * { display: none !important; }
            #pdfModal { display: block !important; position: absolute; top: 0; left: 0; background: white; }
            .pdf-paper { width: 100%; margin: 0; box-shadow: none; }
            .no-print { display: none !important; }
        }
    </style>
</head>
<body>

    <div class="sidebar" id="sidebar">
        <div class="logo">üöÄ Credit Engine</div>
        <div class="nav-item active" onclick="switchView('appView', this)">üìÑ New Application</div>
        <div class="nav-item" onclick="switchView('dashView', this)">üìä Dashboard</div>
        <div class="logout">üö™ Logout</div>
    </div>

    <div class="main-wrapper">
        <div class="header-bar">
            <div style="display:flex; align-items:center;">
                <button class="mobile-toggle" onclick="toggleSidebar()">‚ò∞</button>
                <div class="page-title">DSA Portal</div>
            </div>
            <div style="font-size:12px; font-weight:bold; color:#1a237e;">
                Shield: <span id="policyCount">0</span> Active
            </div>
        </div>

        <div class="content-area">
            
            <div id="appView" class="view-section active-view">
                <h3>New Loan Application</h3>

                <div class="accordion">
                    <div class="accordion-header" onclick="toggleSection('sec1')">1. Business Details <span>‚ñº</span></div>
                    <div id="sec1" class="accordion-body open">
                        <div class="form-grid">
                            <div class="form-group"><label>Business Name</label><input type="text" id="bizName" class="pdf-data" data-label="Business Name"></div>
                            <div class="form-group"><label>Vintage (Years)</label><input type="number" id="vintage" class="pdf-data" data-label="Vintage"></div>
                            <div class="form-group"><label>Turnover (‚Çπ Lakhs)</label><input type="number" id="turnover" class="pdf-data" data-label="Turnover"></div>
                            <div class="form-group"><label>Entity Type</label><select id="entityType"><option>Proprietorship</option><option>Partnership</option><option>Pvt Ltd</option></select></div>
                            <div class="form-group"><label>Sector</label><select id="sector"><option value="Trading">Trading</option><option value="Manufacturing">Manufacturing</option><option value="Service">Service</option></select></div>
                            <div class="form-group"><label>Premises</label><select><option>Owned</option><option>Rented</option></select></div>
                        </div>
                    </div>
                </div>

                <div class="accordion">
                    <div class="accordion-header" onclick="toggleSection('sec2')">2. Banking & Docs <span>‚ñº</span></div>
                    <div id="sec2" class="accordion-body">
                        <div class="form-grid">
                            <div class="form-group"><label>ABB (Avg Balance) ‚Çπ</label><input type="number" id="abb" class="pdf-data" data-label="ABB"></div>
                            <div class="form-group"><label>GST Registered?</label><select><option>No</option><option>Yes</option></select></div>
                            <div class="form-group"><label>ITR Filed?</label><select><option>No</option><option>Yes</option></select></div>
                        </div>
                    </div>
                </div>

                <div class="accordion">
                    <div class="accordion-header" onclick="toggleSection('sec3')">3. Credit Profile <span>‚ñº</span></div>
                    <div id="sec3" class="accordion-body">
                        <div class="form-grid">
                            <div class="form-group"><label>CIBIL Score</label><input type="number" id="cibil" class="pdf-data" data-label="CIBIL"></div>
                            <div class="form-group"><label>Active Loans</label><input type="number" id="activeLoans"></div>
                            <div class="form-group"><label>Monthly EMI (‚Çπ)</label><input type="number" id="monthlyEmi"></div>
                            <div class="form-group"><label>Unsecured Loans</label><input type="number" id="unsecLoans"></div>
                        </div>
                    </div>
                </div>

                <div class="accordion">
                    <div class="accordion-header" onclick="toggleSection('sec4')">4. Applicant Details <span>‚ñº</span></div>
                    <div id="sec4" class="accordion-body">
                        <div class="form-grid">
                            <div class="form-group"><label>Applicant Age</label><input type="number" id="age"></div>
                            <div class="form-group"><label>Co-Applicant?</label><select><option>No</option><option>Yes</option></select></div>
                            <div class="form-group"><label>Own House?</label><select><option>No</option><option>Yes</option></select></div>
                        </div>
                    </div>
                </div>

                <div class="accordion">
                    <div class="accordion-header" onclick="toggleSection('sec5')">5. Loan Requirement <span>‚ñº</span></div>
                    <div id="sec5" class="accordion-body">
                        <div class="form-grid">
                            <div class="form-group"><label>Required Amount (Lakhs)</label><input type="number" id="reqAmount"></div>
                            <div class="form-group"><label>Purpose</label><select><option>Working Capital</option><option>Expansion</option></select></div>
                        </div>
                    </div>
                </div>

                <button class="submit-btn" onclick="runEngine()">‚ö° Check Eligibility</button>
                <button class="report-btn" id="dlBtn" onclick="openPDF()">üìÑ Download Offer Letter</button>
                <div id="resultsArea" style="margin-top:20px;"></div>
            </div>

            <div id="dashView" class="view-section">
                <h3>DSA Dashboard</h3>
                
                <div class="dash-card">
                    <h4>üìÇ Application History (Downloads)</h4>
                    <table class="dash-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Customer Name</th>
                                <th>Loan Amount</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>20-12-2025</td>
                                <td>Rahul Traders</td>
                                <td>‚Çπ50 L</td>
                                <td style="color:green;">Eligible</td>
                                <td><button>Re-Download</button></td>
                            </tr>
                            <tr>
                                <td>19-12-2025</td>
                                <td>Sneha Mfg</td>
                                <td>‚Çπ1.2 Cr</td>
                                <td style="color:red;">Declined</td>
                                <td><button>View</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="dash-card">
                    <h4>üîê User Settings</h4>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Change Username</label>
                            <input type="text" value="dsa_user_01">
                        </div>
                        <div class="form-group">
                            <label>Change Password</label>
                            <input type="password" placeholder="New Password">
                        </div>
                    </div>
                    <button class="submit-btn" style="width:auto; margin-top:10px;">Update Credentials</button>
                </div>
            </div>

        </div>
    </div>

    <div id="pdfModal">
        <div class="pdf-paper">
            <div class="no-print" style="text-align:right;">
                <button onclick="document.getElementById('pdfModal').style.display='none'">Close</button>
                <button onclick="window.print()">Print</button>
            </div>
            <h2 style="text-align:center; text-decoration:underline;">PROVISIONAL OFFER LETTER</h2>
            <p><strong>Customer:</strong> <span id="pdfName"></span></p>
            <div id="pdfContent"></div>
        </div>
    </div>

    <script>
        // POINT 1: ALL 11 POLICIES INCLUDED
        const policies = [
            { name: "TATA CAPITAL STBL", minTurn: 20 },
            { name: "ADITYA BIRLA STBL", minTurn: 25 },
            { name: "BAJAJ FINANCE TERM", minTurn: 40 },
            { name: "TATA CAPITAL HTBL", minTurn: 200 },
            { name: "ADITYA BIRLA BIG TICKET", minTurn: 250 },
            { name: "PIRAMAL CAPITAL UBL", minTurn: 30 },
            { name: "PIRAMAL CAPITAL UBL+", minTurn: 100 },
            { name: "ADITYA BIRLA DROP OD", minTurn: 100 },
            { name: "TATA CAPITAL DROP OD", minTurn: 100 },
            { name: "BAJAJ FINANCE FLEXI OD", minTurn: 50 },
            { name: "CLIX CAPITAL", minTurn: 15 }
        ];

        window.onload = () => { document.getElementById('policyCount').innerText = policies.length; };

        // NAVIGATION
        function switchView(id, btn) {
            document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active-view'));
            document.getElementById(id).classList.add('active-view');
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            btn.classList.add('active');
            if(window.innerWidth < 768) toggleSidebar();
        }

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active-mobile');
        }

        function toggleSection(id) {
            const el = document.getElementById(id);
            el.style.display = (el.style.display === 'block') ? 'none' : 'block';
        }

        // LOGIC
        function runEngine() {
            const turnover = parseFloat(document.getElementById('turnover').value) || 0;
            let eligible = 0;
            policies.forEach(p => { if(turnover >= p.minTurn) eligible++; });
            
            document.getElementById('resultsArea').innerHTML = `<h3>Found ${eligible} Eligible Banks</h3>`;
            document.getElementById('dlBtn').style.display = 'block';
        }

        function openPDF() {
            document.getElementById('pdfName').innerText = document.getElementById('bizName').value || "Customer";
            document.getElementById('pdfModal').style.display = 'block';
        }
    </script>
</body>
</html>
